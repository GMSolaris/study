1. Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
```
Тут подойдет MongoDB, хотя не раз встречал, что подобные решения делают на обычном sql,
где в одной колонке хранят id чека, в другой json со всеми данными чека. А для получения данных используют json_extract.
```

- Склады и автомобильные дороги для логистической компании
```
В целом в основе всех специальных баз данных для gis лежат обычные SQL базы. 
Пример PostGIS. Можно использовать и стоковые SQL базы.
```

- Генеалогические деревья
```
Для гинеалогического дерева идеально подошла бы иерархическая база данных, но они имеют сложный и зачастую старый програмный код.
В теории это можно так же реализовать на SQL, где у каждого элемента прописано 2 родителя.
Что-то подобное получается если выгружать, например, из 1С иерархический справочник в SQL.
```

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
```
Тут однозначно выбор либо Redis либо memcache. В принципе и той и другой пользовался именно для этих целей.
Не важна целостность хранимых данных, если в кеше нет, перезапросим в основной базе, зато огромная скорость выдачи ответа.
```

- Отношения клиент-покупка для интернет-магазина
```
Ну по собственному опыту разработки и поддержки ИМ использовать SQL вполне себе корректно.
```

2. Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

-Данные записываются на все узлы с задержкой до часа (асинхронная запись)
```
AP Яркий пример данной системы DNS сервера. 
По классификации PACELC это скорей PA\EL
```

-При сетевых сбоях, система может разделиться на 2 раздельных кластера
```
Система класса CP в каждый момент обеспечивает целостный результат и способна функционировать в условиях распада
но достигает этого в ущерб доступности: может не выдавать отклик на запрос. 
По классификации PACELC это скорее PA\EC
```

-Система может не прислать корректный ответ или сбросить соединение
```
Система класса CP в каждый момент обеспечивает целостный результат и способна функционировать в условиях распада,
но достигает этого в ущерб доступности: может не выдавать отклик на запрос.
По классификации PACELC это тоже видимо будет PA\EL
```

3. Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

BASE и ACID диаметрально противоположные принципы работы системы, если ACID стремится к полной согласованности данных, изолированности транзакций, атомарности и прочности, то в BASE подразумевается такой подход к проектированию приложения, чтобы сбой в некоторых узлах приводил к отказу в обслуживании только для незначительной части сессий при сохранении доступности в большинстве случаев. В итоге можно пожертвовать частью не особо критичных данных (например сессиями) ради более быстрой работы остальной части приложения.

4. Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?
```
В данном случае могу рассказать на личном опыте. В продакшене имеем РИБ 1С из 4 узлов,
где центральный узел обменивается с периферией пакетами раз час.
Было принятно решение перейти на обмен критично важными с точки зрения опреативности
документами (поступления ДС, остатки складов и тд) между узлами через RabbitMQ - классической PUB/SUB системой.
В итоге на лету центральный узел генерирует пакет из сообщений и публикует его в брокер,
далее переферийный узлы забирают пакет сообщений и применяют его.
Плюсы данной технологии - ускорение процесса обмена,
снижение регулярной нагрузки на узлах (нагрузка размазана по времени).
Минусы - система зависима от latency, так как теперь вместо одного пакета размером 100мб,
нужно утянуть 10000 пакетов по 10кб - чем дальше принимающий узел, тем выше время получения очереди пакетов.
Этот момент решаем через федерализацию узлов - рядом с каждым узлом 1С стоит узел RMQ,
который старается принять пакет из центра упакованным и перефрийный узел 1С взаимодействует уже с ним.
Для отказоустойчивости оставлена старая система обмена данными на основе РИБ,
если в RMQ протухает очередь подписки (время жизни пакетов не более 1ч),
то данные пакуются в обычный обмен и передаются средствами обмена 1С.
```

